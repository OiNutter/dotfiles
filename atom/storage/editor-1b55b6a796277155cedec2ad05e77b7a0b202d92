{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":22,"width":1280,"height":774},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/will/.dotfiles","buffers":[{"text":"","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":20,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/will/.dotfiles/install.sh","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"da39a3ee5e6b4b0d3255bfef95601890afd80709","deserializer":"TextBuffer"},{"text":"require 'rake'\n\nDIRS_TO_SYMLINK = ['ssh','skeletor','heroku','bin','vim','marked','atom']\n$skip_all = false\n$overwrite_all = false\n$backup_all = false\n\ndesc \"Generates a symlink\"\ndef link_file(file,path)\n\t\n\toverwrite = false\n    backup = false\n\t\n\ttarget = \"#{ENV[\"HOME\"]}/.#{file}\"\n\n    if File.exists?(target) || File.symlink?(target)\n      unless $skip_all || $overwrite_all || $backup_all\n        puts \"File already exists: #{target}, what do you want to do? [s]kip, [S]kip all, [o]verwrite, [O]verwrite all, [b]ackup, [B]ackup all\"\n        case STDIN.gets.chomp\n\t\twhen 'o' then overwrite = true\n\t\twhen 'b' then backup = true\n\t\twhen 'O' then $overwrite_all = true\n\t\twhen 'B' then $backup_all = true\n\t\twhen 'S' then $skip_all = true\n\t\twhen 's' then return\n\t\tend\n      end\n      FileUtils.rm_rf(target) if overwrite || $overwrite_all\n      `mv \"$HOME/.#{file}\" \"$HOME/.#{file}.backup\"` if backup || $backup_all\n    end\n\tif !$skip_all\n\t    `ln -s \"$PWD/#{path}\" \"#{target}\"`\n\tend\n\t\nend\n\ndesc \"Hook our dotfiles into system-standard positions.\"\ntask :install do\n  linkables = Dir.glob('*/**{.symlink}')\n\n  linkables.each do |linkable|\n\n    file = linkable.split('/').last.split('.symlink').last\n    \n\tlink_file file, linkable\n\t\n  end\n  \n  DIRS_TO_SYMLINK.each do |directory|\n\tdir = directory.split('/').last\n\tlink_file dir, directory\n  end\nend\n\ntask :uninstall do\n\n  Dir.glob('**/*.symlink').each do |linkable|\n\n    file = linkable.split('/').last.split('.symlink').last\n    target = \"#{ENV[\"HOME\"]}/.#{file}\"\n\n    # Remove all symlinks created during installation\n    if File.symlink?(target)\n      FileUtils.rm(target)\n    end\n    \n    # Replace any backups made during installation\n    if File.exists?(\"#{ENV[\"HOME\"]}/.#{file}.backup\")\n      `mv \"$HOME/.#{file}.backup\" \"$HOME/.#{file}\"` \n    end\n\n  end\nend\n\ntask :default => 'install'\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":38},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/will/.dotfiles/Rakefile","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"e81c2370a91ac50b14d50e787fd870c00ef7db8d","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"items":[{"id":20,"softTabs":false,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":21,"softWrap":false,"editorWidthInChars":152,"tokenizedBuffer":{"bufferPath":"/Users/will/.dotfiles/install.sh","tabLength":4,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":38,"softTabs":false,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":39,"softWrap":false,"editorWidthInChars":152,"tokenizedBuffer":{"bufferPath":"/Users/will/.dotfiles/Rakefile","tabLength":4,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/will/.dotfiles/Rakefile","focused":false,"active":true,"deserializer":"Pane"},"deserializer":"PaneContainer"},"fullScreen":false,"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/will/.dotfiles/install.sh":1397817085228,"/Users/will/.dotfiles/Rakefile":1397817095206},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":170480195},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/will/.dotfiles/Rakefile","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}